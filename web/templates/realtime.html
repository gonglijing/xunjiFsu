{{ define "realtime-content" }}
<!-- 设备选择和数据概览 -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">实时数据监控</h3>
        <div class="flex gap-3">
            <select id="refresh-interval" class="form-select" style="width:auto;">
                <option value="1000">1秒刷新</option>
                <option value="2000" selected>2秒刷新</option>
                <option value="5000">5秒刷新</option>
                <option value="10000">10秒刷新</option>
            </select>
            <button hx-get="/api/data/points" hx-trigger="click" hx-target="#realtime-content" class="btn btn-primary">
                ↻ 刷新
            </button>
        </div>
    </div>
    
    <div class="filter-bar mb-6">
        <div class="filter-item">
            <label class="form-label">选择设备</label>
            <select id="device-select" class="form-select" hx-get="/api/data/points" hx-trigger="change" hx-target="#realtime-content">
                <option value="">-- 选择设备 --</option>
                <option value="all">所有设备</option>
            </select>
        </div>
    </div>
</div>

<!-- 实时数据展示 -->
<div id="realtime-content" hx-get="/api/data/points" hx-trigger="load, every 3s" hx-target="this">
    <div class="card">
        <div class="chart-container">
            <div class="chart-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                    <path d="M3 3v18h18"/>
                    <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
                </svg>
                <div>正在加载实时数据...</div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const refreshSelect = document.getElementById('refresh-interval');
    const content = document.getElementById('realtime-content');
    
    if (refreshSelect && content) {
        refreshSelect.addEventListener('change', function() {
            const interval = this.value;
            content.setAttribute('hx-trigger', 'load, every ' + interval + 's');
        });
    }
});
</script>
{{ end }}
